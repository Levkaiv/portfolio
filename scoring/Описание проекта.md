# Выявление лучшей скоринговой модели 

## Описание
Необходимо сравнить текущую скоринговую модель с моделью, предложенной другой скоринговой компанией.
В рамках проекта проведено сравнение двух скоринговых моделей для оценки кредитоспособности клиентов на основе реальных данных. Основная цель — определить, какая из моделей лучше предсказывает дефолт и обеспечивает более высокую доходность.

#### Примечание
В проекте используются искуственно сгенерированные данные. Кондифициальность компании, для которой реализован данный проект, сохранена.

### Структура проекта:
1) Файл [generated_data.py](generated_data.py) содержит в себе небольшой кусок кода с генерацией 2 таблиц, которые были в реальном проекте. Генерация данных не отражает реальных данных компании, однако сохранена бизнес-логика в данных для микрокредитных организаций. 

2) [Сгенерированный файл c данными от стороней компании с правилами по клиентам (1 или 0 - выполнено правило или нет) и SCORE-инговой моделью, разработаной другой компанией](synthetic_data.csv)

3) [Сгенерированный файл с метриками доходности и дефолта, текущим скорингом в компании и немногими данными о клиентах](synthetic_perform.csv):
- сколько кредитов закрыто в компании
- дата кредита
- ID пользователя
- FPD_30 - просрочка 30 дней на первом платеже
- DPD_20_75 - просрочка 20 дней на всех платежах клиента
- Surplus_60 - доходность займа в зависимости от суммы взятого кредита на 60 день с момента взятия кредита
- ltv_60 - доходность клиента в зависимости от суммы всех взятых кредитов до этого на 60 день с момента взятия 1 кредита
- Isissued - процент одобрения/выдачи кредита

3) Файл [analis.ipynb](analis.ipynb) - Jupiter Notebook, в котором проведено реальное исследование данных. Выявлена лучшая скоринговая модель.

### Поиск лучших правил
Также при ретро-тесте от сторонней компании были получены правила, которые показывают какую-то харакретистику о человеке. 
Например: 
- фотография сделана в машине (1) или нет (0)
- в кредитной истории (БКИ) есть кредит с таким же ФИО, датой рождения, ИНН и адресом регистрации, но с другим лицом (также флаг 1 или 0)

Для поиска лучших правил используется t-test для независимых выборок. В некоторых правилах было больше вариантов, чем 1 или 0, поэтому я добавил непараметрический тест Краскела-Уоллиса (непараметрический аналог ANOVA для независимых выборок).
Перед проведением теста проверяется, что размер каждой группы не меньше заданного порога. Если хотя бы одна группа слишком мала - правило пропускается. Делается это для того, чтобы исключить правила, которые либо вообще не срабатывают, либо срабатывают на всех клиентах.

## Итоги
### Выявление лучшей скоринговой модели
Обе модели похожи по своей прогнозной силе, однако выбор падает на модель с наименьшей ценой за хит (запрос на один кредит) 


### Поиск лучшего правила
Отдельно рассматривались первые и повторные клиенты (у них разный перфом)

Для первых клиентов лучше всего работает правило №59 (rule_59) - видно, что на первых кредитах клиенты, у которых правило сработало, платят плохо, однако при повторных займах и следующих платежах дефолт ниже и ltv (доходность выше), поэтому клиенты платят больше.

Для повторных клиентов лучше всего работает правило №97 (rule_97). На первом платеже клиенты платят хорошо, однако на следующих платежах дефолт кратно выше, что говорит о неспособности выплатить кредит полностью повторным клиентам, у кого сработало правило №97.

